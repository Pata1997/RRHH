===============================================
ğŸš€ GUÃA DE INSTALACIÃ“N Y EJECUCIÃ“N - SISTEMA RRHH
===============================================

ğŸ“‹ TABLA DE CONTENIDOS:
1. Requisitos del Sistema
2. InstalaciÃ³n Paso a Paso
3. ConfiguraciÃ³n de PostgreSQL
4. EjecuciÃ³n de la AplicaciÃ³n
5. Acceso a la AplicaciÃ³n
6. Troubleshooting

===============================================
1ï¸âƒ£ REQUISITOS DEL SISTEMA
===============================================

âœ“ Python 3.8 o superior
âœ“ PostgreSQL 12 o superior
âœ“ pip (incluido con Python)
âœ“ Git (opcional)
âœ“ Un editor de texto o IDE

Verificar versiones:
  python --version
  psql --version


===============================================
2ï¸âƒ£ INSTALACIÃ“N PASO A PASO (Windows)
===============================================

PASO 1: Navegar al directorio del proyecto
â”Œâ”€ Abrir PowerShell o CMD
â””â”€ cd C:\Users\Informatica 1\Desktop\Proyectos\RRHH2

PASO 2: Crear entorno virtual
â”Œâ”€ python -m venv venv
â””â”€ âœ“ Se crea carpeta 'venv'

PASO 3: Activar entorno virtual
â”Œâ”€ venv\Scripts\activate
â””â”€ âœ“ El prompt debe mostrar (venv)

PASO 4: Actualizar pip (opcional pero recomendado)
â”Œâ”€ python -m pip install --upgrade pip
â””â”€ âœ“ pip actualizado

PASO 5: Instalar dependencias
â”Œâ”€ pip install -r requirements.txt
â””â”€ âœ“ Se instalan todas las librerÃ­as necesarias

PASO 6: Crear archivo .env
â”Œâ”€ Copiar .env.example a .env
â”‚  (BotÃ³n derecho en .env.example â†’ Copiar â†’ Pegar â†’ Renombrar)
â””â”€ Editar .env con los datos correctos


===============================================
3ï¸âƒ£ CONFIGURACIÃ“N DE POSTGRESQL
===============================================

PASO 1: Abrir PostgreSQL (pgAdmin o CLI)

OPCIÃ“N A - Usando pgAdmin (interfaz grÃ¡fica):
  1. Abrir pgAdmin
  2. Clic en Servers â†’ PostgreSQL â†’ Databases
  3. Clic derecho â†’ Create â†’ Database
  4. Nombre: rrhh_db
  5. Save

OPCIÃ“N B - Usando SQL CLI:
  psql -U postgres
  
  Luego ejecutar:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  CREATE DATABASE rrhh_db;
  
  CREATE USER rrhh_user WITH PASSWORD 'password123';
  
  ALTER ROLE rrhh_user SET client_encoding TO 'utf8';
  ALTER ROLE rrhh_user SET default_transaction_isolation TO 'read committed';
  ALTER ROLE rrhh_user SET default_transaction_deferrable TO on;
  
  GRANT ALL PRIVILEGES ON DATABASE rrhh_db TO rrhh_user;
  
  \q (para salir)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PASO 2: Actualizar archivo .env con credenciales:
  DATABASE_URL=postgresql://rrhh_user:password123@localhost:5432/rrhh_db


===============================================
4ï¸âƒ£ EJECUCIÃ“N DE LA APLICACIÃ“N
===============================================

PASO 1: Asegurar que el entorno virtual estÃ© activado
  âœ“ El prompt debe mostrar (venv)

PASO 2: Inicializar la base de datos con datos de prueba
  python init_database.py
  
  âœ“ VerÃ¡s un mensaje: "âœ… BASE DE DATOS INICIALIZADA CORRECTAMENTE"

PASO 3: Ejecutar la aplicaciÃ³n
  python run.py
  
  âœ“ VerÃ¡s algo como:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  * Running on http://127.0.0.1:5000
  * Debug mode: on
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

LISTO! La aplicaciÃ³n estÃ¡ corriendo âœ¨


===============================================
5ï¸âƒ£ ACCESO A LA APLICACIÃ“N
===============================================

Abrir navegador web en:
ğŸ“± http://localhost:5000

Usuarios disponibles:

â”Œâ”€ USUARIO 1: Administrador RRHH
â”‚  Usuario: admin
â”‚  ContraseÃ±a: admin123
â”‚  Rol: RRHH (acceso total)
â”‚
â””â”€ USUARIO 2: Asistente RRHH
   Usuario: asistente
   ContraseÃ±a: asistente123
   Rol: Asistente RRHH (acceso limitado)


PRIMEROS PASOS:
  1. Ingresar con usuario: admin
  2. Ver el Dashboard
  3. Ir a "Empleados" â†’ "Listar"
  4. Crear un nuevo empleado
  5. Ir a "Asistencia" y registrar entrada/salida
  6. Generar liquidaciones en "NÃ³mina" â†’ "Generar"
  7. Descargar PDF del recibo


===============================================
6ï¸âƒ£ TROUBLESHOOTING
===============================================

âŒ ERROR: "ModuleNotFoundError: No module named 'flask'"
   âœ“ SoluciÃ³n: pip install -r requirements.txt

âŒ ERROR: "psycopg2 connection refused"
   âœ“ SoluciÃ³n: 
     - Verificar que PostgreSQL estÃ© corriendo
     - Verificar credenciales en .env
     - Verificar host y puerto

âŒ ERROR: "Port 5000 is already in use"
   âœ“ SoluciÃ³n: 
     - Cambiar puerto en run.py (Ãºltima lÃ­nea)
     - O terminar proceso: netstat -ano | findstr 5000

âŒ ERROR: "No module named 'reportlab'"
   âœ“ SoluciÃ³n: pip install reportlab

âŒ ERROR al generar PDF: "No such file or directory: 'uploads'"
   âœ“ SoluciÃ³n: La carpeta se crea automÃ¡ticamente, reintentar

âŒ ERROR: "Environment variable DATABASE_URL not set"
   âœ“ SoluciÃ³n: 
     - Crear archivo .env en raÃ­z del proyecto
     - Agregar: DATABASE_URL=postgresql://...
     - Reiniciar la aplicaciÃ³n

âŒ Base de datos vacÃ­a sin datos iniciales
   âœ“ SoluciÃ³n: 
     - Ejecutar: python init_database.py
     - Verificar que PostgreSQL estÃ© corriendo


===============================================
ğŸ“š ESTRUCTURA DE ARCHIVOS IMPORTANTES
===============================================

RRHH2/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py           â† Factory de Flask
â”‚   â”œâ”€â”€ models.py             â† Modelos de BD
â”‚   â”œâ”€â”€ config.py             â† ConfiguraciÃ³n
â”‚   â”œâ”€â”€ bitacora.py           â† AuditorÃ­a
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.py           â† Login/Logout
â”‚   â”‚   â”œâ”€â”€ rrhh.py           â† Rutas principales
â”‚   â”‚   â””â”€â”€ main.py           â† Dashboard
â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â””â”€â”€ report_utils.py   â† GeneraciÃ³n PDFs
â”‚   â”œâ”€â”€ templates/            â† HTML
â”‚   â””â”€â”€ static/               â† CSS, JS, imÃ¡genes
â”œâ”€â”€ run.py                    â† Archivo principal
â”œâ”€â”€ init_database.py          â† InicializaciÃ³n BD
â”œâ”€â”€ requirements.txt          â† Dependencias
â”œâ”€â”€ .env                      â† Variables de entorno
â”œâ”€â”€ README.md                 â† DocumentaciÃ³n
â””â”€â”€ venv/                     â† Entorno virtual (creado)


===============================================
ğŸ¯ FUNCIONES PRINCIPALES POR MÃ“DULO
===============================================

AUTENTICACIÃ“N:
  âœ“ Login seguro
  âœ“ Logout
  âœ“ Cambio de contraseÃ±a
  âœ“ Roles: RRHH y Asistente RRHH

EMPLEADOS:
  âœ“ Crear, editar, eliminar
  âœ“ InformaciÃ³n personal y laboral
  âœ“ Estados (Activo, Inactivo, Suspendido)

ASISTENCIA:
  âœ“ Registro por cÃ³digo de empleado
  âœ“ Entrada/salida automÃ¡tica
  âœ“ EdiciÃ³n manual

NÃ“MINA:
  âœ“ GeneraciÃ³n automÃ¡tica de liquidaciones
  âœ“ CÃ¡lculo de IPS (9.625%)
  âœ“ Recibos en PDF

PERMISOS:
  âœ“ Solicitud de permisos
  âœ“ AprobaciÃ³n/rechazo
  âœ“ Historial

SANCIONES:
  âœ“ Registro de sanciones
  âœ“ Descuentos automÃ¡ticos

VACACIONES:
  âœ“ Solicitud de vacaciones
  âœ“ Seguimiento de dÃ­as

REPORTES:
  âœ“ Recibo individual (PDF)
  âœ“ Planilla mensual (PDF)
  âœ“ Contrato de trabajo (PDF)

AUDITORÃA:
  âœ“ BitÃ¡cora de todas las acciones
  âœ“ Filtrado por usuario/mÃ³dulo
  âœ“ IP, User Agent, timestamps


===============================================
ğŸ’¡ CONSEJOS ÃšTILES
===============================================

1. Crear mÃ¡s empleados de prueba:
   - Ir a Empleados â†’ Nuevo Empleado
   - Usar cÃ³digos secuenciales: EMP001, EMP002, etc.

2. Para ver cambios en tiempo real:
   - La aplicaciÃ³n se recarga automÃ¡ticamente en modo desarrollo

3. Acceder a la consola de depuraciÃ³n:
   - Errores detallados se muestran en navegador
   - Revisar consola de PowerShell para logs

4. Desactivar modo debug en producciÃ³n:
   - En app/__init__.py cambiar debug=False

5. Cambiar puerto si 5000 estÃ¡ ocupado:
   - En run.py Ãºltima lÃ­nea: port=5001 (o el que prefieras)


===============================================
ğŸ” SEGURIDAD - RECOMENDACIONES
===============================================

âš ï¸ ANTES DE PRODUCCIÃ“N:

1. Cambiar SECRET_KEY en .env
   - Generar clave aleatoria de mÃ­nimo 32 caracteres
   - Ejemplo: openssl rand -hex 32

2. Cambiar contraseÃ±as de usuarios
   - Acceso desde: Dashboard â†’ Usuario â†’ Cambiar contraseÃ±a

3. Configurar base de datos:
   - Usar contraseÃ±a fuerte para PostgreSQL
   - Limitar conexiones remotas

4. Usar HTTPS:
   - Instalar certificado SSL
   - Usar Nginx o Apache como proxy inverso

5. Variables de entorno:
   - Nunca compartir .env
   - Agregar a .gitignore
   - Usar secretos del servidor en producciÃ³n


===============================================
ğŸ“ SOPORTE Y PREGUNTAS
===============================================

Si encuentras errores:

1. Verificar mensaje de error exacto
2. Buscar en Google o StackOverflow
3. Revisar los logs en la consola
4. Verificar que todas las dependencias estÃ©n instaladas
5. Reiniciar la aplicaciÃ³n


===============================================
âœ… CHECKLIST FINAL
===============================================

Antes de empezar a trabajar, verifica:

â–¡ Python instalado y en PATH
â–¡ PostgreSQL corriendo
â–¡ Base de datos rrhh_db creada
â–¡ Usuario rrhh_user creado
â–¡ Entorno virtual activado (venv)
â–¡ Dependencias instaladas (pip install -r requirements.txt)
â–¡ Archivo .env creado y configurado
â–¡ Base de datos inicializada (python init_database.py)
â–¡ AplicaciÃ³n corriendo (python run.py)
â–¡ Navegador accediendo a http://localhost:5000
â–¡ Login funcionando con admin/admin123

Â¡Si todo estÃ¡ ok, estÃ¡s listo para trabajar! ğŸ‰


===============================================
Documento actualizado: Noviembre 2025
Sistema de RRHH - Cooperativa
===============================================
