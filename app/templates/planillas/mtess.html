{% extends 'base.html' %}

{% block title %}Planillas MTESS{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2><i class="bi bi-file-earmark-spreadsheet"></i> Gestión de Planillas</h2>
        </div>
    </div>

    <!-- Planillas MTESS (única opción visible) -->
    <div class="row mb-4">
        <div class="col-md-7">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-file-earmark-text"></i> Planillas MTESS (Generales)</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">Planillas de personal, sueldos y resumen general.</p>
                    <form method="GET" action="{{ url_for('rrhh.planillas_mtess_download') }}">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Tipo</label>
                                <select name="tipo" class="form-select">
                                    <option value="personal">Personal</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Año</label>
                                <input type="number" name="anio" class="form-control" value="{{ current_year }}" required>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Mes (Opcional)</label>
                                <input type="number" name="mes" class="form-control" min="1" max="12" placeholder="Opcional">
                            </div>
                        </div>
                        <button class="btn btn-info w-100">Descargar</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-5">
            <div class="card mb-3 bg-light border-info">
                <div class="card-body">
                    <h6 class="card-title text-info"><i class="bi bi-check-circle"></i> Requisitos</h6>
                    <ul class="small mb-0">
                        <li>✓ Empleados con datos personales completos (nombre, apellido, cédula)</li>
                        <li>✓ Cargos configurados</li>
                        <li>✓ Fecha de ingreso/salida registrada</li>
                        <li>✓ Salarios base configurados</li>
                    </ul>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <h6 class="card-title"><i class="bi bi-info-circle"></i> Columnas del Excel</h6>
                    <p class="small mb-0">
                        <strong>Tipo Personal:</strong> Nombre, Apellido, Cédula, Fecha Ingreso, Fecha Salida, Cargo, Sexo, Edad, Nacionalidad, Motivo Salida
                    </p>
                </div>
            </div>

            <div class="card bg-light border-success">
                <div class="card-body">
                    <p class="small mb-0">
                        Para <strong>Planilla IPS/REI</strong>, dirigirse a 
                        <a href="{{ url_for('rrhh.planillas_ips_rei') }}" class="link-success">IPS/REI en el menú Planillas</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <p class="text-muted"><i class="bi bi-info-circle"></i> Todas las descargas quedan registradas en la bitácora.</p>
        </div>
    </div>
</div>
{% endblock %}
